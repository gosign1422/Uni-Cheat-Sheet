{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashg\\\\OneDrive\\\\Desktop\\\\UPES_2025\\\\chat-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from './supabaseClient';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [username, setUsername] = useState('');\n  const [isUsernameSet, setIsUsernameSet] = useState(false);\n  useEffect(() => {\n    // Fetch initial messages\n    fetchMessages();\n\n    // Subscribe to new messages\n    const subscription = supabase.channel('messages').on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'messages'\n    }, payload => {\n      setMessages(prev => [...prev, payload.new]);\n    }).subscribe();\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n  const fetchMessages = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from('messages').select('*').order('created_at', {\n      ascending: true\n    });\n    if (error) {\n      console.error('Error fetching messages:', error);\n      return;\n    }\n    setMessages(data);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !username) return;\n    const {\n      error\n    } = await supabase.from('messages').insert([{\n      username,\n      content: newMessage.trim()\n    }]);\n    if (error) {\n      console.error('Error sending message:', error);\n      return;\n    }\n    setNewMessage('');\n  };\n  const setUsernameHandler = e => {\n    e.preventDefault();\n    if (username.trim()) {\n      setIsUsernameSet(true);\n    }\n  };\n  if (!isUsernameSet) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"username-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Enter your username to start chatting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: setUsernameHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          placeholder: \"Enter username\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Start Chatting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Live Chat Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"username-display\",\n        children: [\"Logged in as: \", username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.username === username ? 'own-message' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-username\",\n          children: message.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-time\",\n          children: new Date(message.created_at).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"message-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value),\n        placeholder: \"Type your message...\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"W4cILYsYhddkAYYbnjzbBj0ni7k=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","supabase","jsxDEV","_jsxDEV","App","_s","messages","setMessages","newMessage","setNewMessage","username","setUsername","isUsernameSet","setIsUsernameSet","fetchMessages","subscription","channel","on","event","schema","table","payload","prev","new","subscribe","unsubscribe","data","error","from","select","order","ascending","console","handleSubmit","e","preventDefault","trim","insert","content","setUsernameHandler","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","required","map","message","index","Date","created_at","toLocaleTimeString","_c","$RefreshReg$"],"sources":["C:/Users/yashg/OneDrive/Desktop/UPES_2025/chat-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from './supabaseClient';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [isUsernameSet, setIsUsernameSet] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Fetch initial messages\r\n    fetchMessages();\r\n\r\n    // Subscribe to new messages\r\n    const subscription = supabase\r\n      .channel('messages')\r\n      .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages' }, payload => {\r\n        setMessages(prev => [...prev, payload.new]);\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const fetchMessages = async () => {\r\n    const { data, error } = await supabase\r\n      .from('messages')\r\n      .select('*')\r\n      .order('created_at', { ascending: true });\r\n\r\n    if (error) {\r\n      console.error('Error fetching messages:', error);\r\n      return;\r\n    }\r\n\r\n    setMessages(data);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() || !username) return;\r\n\r\n    const { error } = await supabase\r\n      .from('messages')\r\n      .insert([\r\n        {\r\n          username,\r\n          content: newMessage.trim(),\r\n        },\r\n      ]);\r\n\r\n    if (error) {\r\n      console.error('Error sending message:', error);\r\n      return;\r\n    }\r\n\r\n    setNewMessage('');\r\n  };\r\n\r\n  const setUsernameHandler = (e) => {\r\n    e.preventDefault();\r\n    if (username.trim()) {\r\n      setIsUsernameSet(true);\r\n    }\r\n  };\r\n\r\n  if (!isUsernameSet) {\r\n    return (\r\n      <div className=\"username-container\">\r\n        <h2>Enter your username to start chatting</h2>\r\n        <form onSubmit={setUsernameHandler}>\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            placeholder=\"Enter username\"\r\n            required\r\n          />\r\n          <button type=\"submit\">Start Chatting</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <div className=\"chat-header\">\r\n        <h1>Live Chat Room</h1>\r\n        <div className=\"username-display\">Logged in as: {username}</div>\r\n      </div>\r\n      \r\n      <div className=\"messages-container\">\r\n        {messages.map((message, index) => (\r\n          <div key={index} className={`message ${message.username === username ? 'own-message' : ''}`}>\r\n            <div className=\"message-username\">{message.username}</div>\r\n            <div className=\"message-content\">{message.content}</div>\r\n            <div className=\"message-time\">\r\n              {new Date(message.created_at).toLocaleTimeString()}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"message-form\">\r\n        <input\r\n          type=\"text\"\r\n          value={newMessage}\r\n          onChange={(e) => setNewMessage(e.target.value)}\r\n          placeholder=\"Type your message...\"\r\n          required\r\n        />\r\n        <button type=\"submit\">Send</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}