{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashg\\\\OneDrive\\\\Desktop\\\\UPES_2025\\\\chat-app\\\\src\\\\ChatWidget.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from './supabaseClient';\nimport './ChatWidget.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ChatWidget() {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [username, setUsername] = useState('');\n  const [isUsernameSet, setIsUsernameSet] = useState(false);\n  useEffect(() => {\n    if (isOpen) {\n      fetchMessages();\n      const subscription = supabase.channel('messages').on('postgres_changes', {\n        event: 'INSERT',\n        schema: 'public',\n        table: 'messages'\n      }, payload => {\n        setMessages(prev => [...prev, payload.new]);\n      }).subscribe();\n      return () => {\n        subscription.unsubscribe();\n      };\n    }\n  }, [isOpen]);\n  const fetchMessages = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from('messages').select('*').order('created_at', {\n      ascending: true\n    });\n    if (error) {\n      console.error('Error fetching messages:', error);\n      return;\n    }\n    setMessages(data);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !username) return;\n    const {\n      error\n    } = await supabase.from('messages').insert([{\n      username,\n      content: newMessage.trim()\n    }]);\n    if (error) {\n      console.error('Error sending message:', error);\n      return;\n    }\n    setNewMessage('');\n  };\n  const setUsernameHandler = e => {\n    e.preventDefault();\n    if (username.trim()) {\n      setIsUsernameSet(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-widget\",\n    children: !isOpen ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"chat-toggle-button\",\n      onClick: () => setIsOpen(true),\n      children: \"\\uD83D\\uDCAC Chat Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-widget-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-widget-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Live Chat Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-button\",\n          onClick: () => setIsOpen(false),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), !isUsernameSet ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"username-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Enter your username to start chatting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: setUsernameHandler,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            placeholder: \"Enter username\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Start Chatting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-container\",\n          children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${message.username === username ? 'own-message' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-username\",\n              children: message.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-time\",\n              children: new Date(message.created_at).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"message-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newMessage,\n            onChange: e => setNewMessage(e.target.value),\n            placeholder: \"Type your message...\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatWidget, \"Tn26RiwqdcFOrAo5B/m2b5jLAi8=\");\n_c = ChatWidget;\nexport default ChatWidget;\nvar _c;\n$RefreshReg$(_c, \"ChatWidget\");","map":{"version":3,"names":["React","useState","useEffect","supabase","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatWidget","_s","isOpen","setIsOpen","messages","setMessages","newMessage","setNewMessage","username","setUsername","isUsernameSet","setIsUsernameSet","fetchMessages","subscription","channel","on","event","schema","table","payload","prev","new","subscribe","unsubscribe","data","error","from","select","order","ascending","console","handleSubmit","e","preventDefault","trim","insert","content","setUsernameHandler","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","required","map","message","index","Date","created_at","toLocaleTimeString","_c","$RefreshReg$"],"sources":["C:/Users/yashg/OneDrive/Desktop/UPES_2025/chat-app/src/ChatWidget.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from './supabaseClient';\r\nimport './ChatWidget.css';\r\n\r\nfunction ChatWidget() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [isUsernameSet, setIsUsernameSet] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchMessages();\r\n      const subscription = supabase\r\n        .channel('messages')\r\n        .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages' }, payload => {\r\n          setMessages(prev => [...prev, payload.new]);\r\n        })\r\n        .subscribe();\r\n\r\n      return () => {\r\n        subscription.unsubscribe();\r\n      };\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const fetchMessages = async () => {\r\n    const { data, error } = await supabase\r\n      .from('messages')\r\n      .select('*')\r\n      .order('created_at', { ascending: true });\r\n\r\n    if (error) {\r\n      console.error('Error fetching messages:', error);\r\n      return;\r\n    }\r\n\r\n    setMessages(data);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() || !username) return;\r\n\r\n    const { error } = await supabase\r\n      .from('messages')\r\n      .insert([\r\n        {\r\n          username,\r\n          content: newMessage.trim(),\r\n        },\r\n      ]);\r\n\r\n    if (error) {\r\n      console.error('Error sending message:', error);\r\n      return;\r\n    }\r\n\r\n    setNewMessage('');\r\n  };\r\n\r\n  const setUsernameHandler = (e) => {\r\n    e.preventDefault();\r\n    if (username.trim()) {\r\n      setIsUsernameSet(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-widget\">\r\n      {!isOpen ? (\r\n        <button className=\"chat-toggle-button\" onClick={() => setIsOpen(true)}>\r\n          💬 Chat Room\r\n        </button>\r\n      ) : (\r\n        <div className=\"chat-widget-container\">\r\n          <div className=\"chat-widget-header\">\r\n            <h3>Live Chat Room</h3>\r\n            <button className=\"close-button\" onClick={() => setIsOpen(false)}>×</button>\r\n          </div>\r\n          \r\n          {!isUsernameSet ? (\r\n            <div className=\"username-container\">\r\n              <h4>Enter your username to start chatting</h4>\r\n              <form onSubmit={setUsernameHandler}>\r\n                <input\r\n                  type=\"text\"\r\n                  value={username}\r\n                  onChange={(e) => setUsername(e.target.value)}\r\n                  placeholder=\"Enter username\"\r\n                  required\r\n                />\r\n                <button type=\"submit\">Start Chatting</button>\r\n              </form>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"messages-container\">\r\n                {messages.map((message, index) => (\r\n                  <div key={index} className={`message ${message.username === username ? 'own-message' : ''}`}>\r\n                    <div className=\"message-username\">{message.username}</div>\r\n                    <div className=\"message-content\">{message.content}</div>\r\n                    <div className=\"message-time\">\r\n                      {new Date(message.created_at).toLocaleTimeString()}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <form onSubmit={handleSubmit} className=\"message-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={newMessage}\r\n                  onChange={(e) => setNewMessage(e.target.value)}\r\n                  placeholder=\"Type your message...\"\r\n                  required\r\n                />\r\n                <button type=\"submit\">Send</button>\r\n              </form>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatWidget; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}